% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/1.6_function_walks_detections.R
\name{simulate_fish_tracks}
\alias{simulate_fish_tracks}
\title{Simulate fish tracks with correlated random walks and detection events}
\usage{
simulate_fish_tracks(
  raster,
  detection_system,
  station_distances = NULL,
  n_paths = 1,
  n_steps = 100,
  step_length_mean = 50,
  step_length_sd = 20,
  turning_angle_mean = 0,
  turning_angle_sd = 45,
  time_step = 60,
  detection_type = "cumulative",
  start_locations = NULL,
  seed = NULL
)
}
\arguments{
\item{raster}{A RasterLayer object defining the study area boundaries.
Fish paths are constrained to non-NA cells.}

\item{detection_system}{Data frame output from \code{\link{calculate_detection_system}}
containing spatial detection probabilities.}

\item{station_distances}{Data frame output from \code{\link{calculate_station_distances}}
with individual receiver detection probabilities. Default is NULL.}

\item{n_paths}{Integer. Number of fish paths to simulate. Default is 1.}

\item{n_steps}{Integer. Number of steps per path. Default is 100.}

\item{step_length_mean}{Numeric. Mean step length in map units. Default is 50.}

\item{step_length_sd}{Numeric. Standard deviation of step length. Default is 20.}

\item{turning_angle_mean}{Numeric. Mean turning angle in degrees. Default is 0.}

\item{turning_angle_sd}{Numeric. Standard deviation of turning angle in degrees.
Default is 45.}

\item{time_step}{Numeric. Time between steps in seconds. Default is 60.}

\item{detection_type}{Character. Type of detection probability to use:
"cumulative" (any receiver) or "3_plus" (3+ receivers for positioning).
Default is "cumulative".}

\item{start_locations}{Matrix or data frame with x,y coordinates for starting
locations. If NULL, random start locations are chosen. Default is NULL.}

\item{seed}{Numeric. Random seed for reproducible results. Default is NULL.}
}
\value{
A list containing:
\item{tracks}{Data frame with path coordinates, step lengths, and bearings}
\item{detections}{Data frame with system-level detection events}
\item{station_detections}{Data frame with individual receiver detections}
\item{parameters}{List of simulation parameters used}
}
\description{
Generates realistic fish movement paths using correlated random walks within
a raster boundary and simulates acoustic detections based on a detection
system's coverage probabilities.
}
\details{
The simulation process involves:
\enumerate{
\item Generating correlated random walks using von Mises distributed turning angles
\item Constraining paths to valid raster cells with boundary reflection
\item Evaluating detection probabilities at each location
\item Simulating detection events for individual receivers and system-level
}

The correlated random walk uses:
\itemize{
\item Normally distributed step lengths (truncated at minimum 5 units)
\item Von Mises distributed turning angles for realistic directional persistence
\item Boundary reflection when paths encounter raster edges or invalid cells
}

Detection simulation requires both detection_system (for system probabilities)
and station_distances (for individual receiver probabilities) to generate
realistic detection patterns.
}
\examples{
\dontrun{
# Generate receiver network and detection system
stations <- generate_random_points(depth_raster, n_points = 6, seed = 123)
distances <- calculate_station_distances(depth_raster, stations, max_distance = 500)
de_model <- create_logistic_curve_depth(
  min_depth = 2, max_depth = 30,
  d50_min_depth = 50, d95_min_depth = 20,
  d50_max_depth = 150, d95_max_depth = 60,
  plot = FALSE
)
detection_sys <- calculate_detection_system(distances, stations, de_model$log_model)

# Simulate fish tracks
fish_sim <- simulate_fish_tracks(
  raster = depth_raster,
  detection_system = detection_sys$data,
  station_distances = distances,
  n_paths = 3,
  n_steps = 50,
  seed = 456
)

# Analyze results
detection_rate <- nrow(fish_sim$detections[fish_sim$detections$detected == 1, ]) /
                  nrow(fish_sim$detections)

# Plot tracks and detections
track_plot <- plot_fish_tracks(fish_sim, depth_raster, stations)
}

}
\seealso{
\code{\link{calculate_detection_system}}, \code{\link{calculate_station_distances}}, \code{\link{plot_fish_tracks}}
}
